
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="canonical" href="https://nus-cs1010.github.io/2122-s1/13-call-stack.html">
      
      <link rel="shortcut icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-6.2.3">
    
    
      
        <title>13. Stack - CS1010 Programming Methodology</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.3b61ea93.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.39b8e14a.min.css">
        
          
          
          <meta name="theme-color" content="#546d78">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="stylesheets/extra.css">
    
      <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:400,700">
    
      <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&display=swap">
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="blue-grey" data-md-color-accent="">
      
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#unit-13-call-stack" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="https://nus-cs1010.github.io/2122-s1" title="CS1010 Programming Methodology" class="md-header-nav__button md-logo" aria-label="CS1010 Programming Methodology">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      <div class="md-header-nav__ellipsis">
        <div class="md-header-nav__topic">
          <span class="md-ellipsis">
            CS1010 Programming Methodology
          </span>
        </div>
        <div class="md-header-nav__topic">
          <span class="md-ellipsis">
            
              13. Stack
            
          </span>
        </div>
      </div>
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    




<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://nus-cs1010.github.io/2122-s1" title="CS1010 Programming Methodology" class="md-nav__button md-logo" aria-label="CS1010 Programming Methodology">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    CS1010 Programming Methodology
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      



  <li class="md-nav__item">
    <a href="index.html" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      



  <li class="md-nav__item">
    <a href="midterm.html" class="md-nav__link">
      Midterm
    </a>
  </li>

    
      
      
      



  <li class="md-nav__item">
    <a href="pe1.html" class="md-nav__link">
      PE1
    </a>
  </li>

    
      
      
      



  
  <li class="md-nav__item md-nav__item--nested">
    
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4" >
    
    <label class="md-nav__link" for="nav-4">
      General
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="General" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        <span class="md-nav__icon md-icon"></span>
        General
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="about.html" class="md-nav__link">
      About CS1010
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="outcomes.html" class="md-nav__link">
      Learning Outcomes
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="schedule.html" class="md-nav__link">
      Schedule
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="accounts.html" class="md-nav__link">
      Accounts
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="policies.html" class="md-nav__link">
      Policies
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="tutors.html" class="md-nav__link">
      Teaching Team
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  


  
  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5" checked>
    
    <label class="md-nav__link" for="nav-5">
      Notes
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Notes" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        <span class="md-nav__icon md-icon"></span>
        Notes
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="01-program.html" class="md-nav__link">
      1. What is a Program?
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="02-algo.html" class="md-nav__link">
      2. Computational Problem & Algorithms
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="03-func.html" class="md-nav__link">
      3. Functions
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="04-type.html" class="md-nav__link">
      4. Types
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="05-first-c.html" class="md-nav__link">
      5. First C Program
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="06-cs1010-io.html" class="md-nav__link">
      6. CS1010 I/O
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="07-arithmetic-ops.html" class="md-nav__link">
      7. Arithmetic Operations
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="08-if-else.html" class="md-nav__link">
      8. Conditional Statement
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="09-logical-exp.html" class="md-nav__link">
      9. Logical Expression
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="10-assert.html" class="md-nav__link">
      10. Assertions
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="11-loop.html" class="md-nav__link">
      11. Loops
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="12-invariant.html" class="md-nav__link">
      12. Invariant
    </a>
  </li>

        
          
          
          


  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        13. Stack
        <span class="md-nav__icon md-icon"></span>
      </label>
    
    <a href="13-call-stack.html" class="md-nav__link md-nav__link--active">
      13. Stack
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#learning-objectives" class="md-nav__link">
    Learning Objectives
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#stack-frame" class="md-nav__link">
    Stack Frame
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#automatic-variable" class="md-nav__link">
    Automatic Variable
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#stack-size" class="md-nav__link">
    Stack Size
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#problem-set-13" class="md-nav__link">
    Problem Set 13
  </a>
  
    <nav class="md-nav" aria-label="Problem Set 13">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#problem-131" class="md-nav__link">
    Problem 13.1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#problem-132" class="md-nav__link">
    Problem 13.2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#problem-133" class="md-nav__link">
    Problem 13.3
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="14-array.html" class="md-nav__link">
      14. Array
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="15-pointers.html" class="md-nav__link">
      15. Pointer
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="16-call-by-reference.html" class="md-nav__link">
      16. Call-by-Reference
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="17-heap.html" class="md-nav__link">
      17. Heap
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="18-string.html" class="md-nav__link">
      18. String
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="19-md-array.html" class="md-nav__link">
      19. ND Array
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="20-macro.html" class="md-nav__link">
      20. C preprocessor
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="21-efficiency.html" class="md-nav__link">
      21. Efficiency
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="22-search.html" class="md-nav__link">
      22. Searching
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="23-sort.html" class="md-nav__link">
      23. Sorting
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="24-tower.html" class="md-nav__link">
      24. Tower of Hanoi
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="25-permutation.html" class="md-nav__link">
      25. Permutattion
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="26-queens.html" class="md-nav__link">
      26. N-Queens
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      



  
  <li class="md-nav__item md-nav__item--nested">
    
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6" >
    
    <label class="md-nav__link" for="nav-6">
      Exercises
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Exercises" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        <span class="md-nav__icon md-icon"></span>
        Exercises
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="ex00.html" class="md-nav__link">
      0. Echo, Divide, Ones, BMI, Quadratic
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="ex01.html" class="md-nav__link">
      1. Odd, Sum, Triangle, Burger
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="ex02.html" class="md-nav__link">
      2. Date, GCD, Leap, Multiple
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="ex03.html" class="md-nav__link">
      3. Three, Factor, Parity, Nine, HDB
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="ex04.html" class="md-nav__link">
      4. Binary, Onigiri, Fibonacci
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="ex05.html" class="md-nav__link">
      5. Counter, Dot, Unit
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="ex06.html" class="md-nav__link">
      6. Error, Twilight, Reverse, Unique, LookNSay
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="ex08.html" class="md-nav__link">
      8. Length, Concat, Search
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="ex09.html" class="md-nav__link">
      9. Echo, Subtract, Line
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="ex10.html" class="md-nav__link">
      10. Transpose, Palindrome, Rotate, Marnell, Bracket
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="ex11.html" class="md-nav__link">
      11. TicTacToe, Sun, Replace, Soil, Substring
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="ex12.html" class="md-nav__link">
      12. Walk, Sudoku
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      



  
  <li class="md-nav__item md-nav__item--nested">
    
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7" >
    
    <label class="md-nav__link" for="nav-7">
      Assignments
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Assignments" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        <span class="md-nav__icon md-icon"></span>
        Assignments
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="assignment.html" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="as01.html" class="md-nav__link">
      1. Pyramid, Digits, Suffix, Taxi
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="as02.html" class="md-nav__link">
      2. Collatz, Rectangle, Prime, Pattern
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="as03.html" class="md-nav__link">
      3. Days, ID, Max, Padovan
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="as04.html" class="md-nav__link">
      4. Selection, Mastermind
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="as05.html" class="md-nav__link">
      5. Kendall, CountingSort, Add
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="as06.html" class="md-nav__link">
      6. Contact, Social, Life,
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="as07.html" class="md-nav__link">
      7. Peak, Sort, Inversion,
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="as08.html" class="md-nav__link">
      8. Fill, Maze,
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      



  <li class="md-nav__item">
    <a href="readings.html" class="md-nav__link">
      Readings
    </a>
  </li>

    
      
      
      



  <li class="md-nav__item">
    <a href="c-in-cs1010.html" class="md-nav__link">
      C in CS1010
    </a>
  </li>

    
      
      
      



  <li class="md-nav__item">
    <a href="style.html" class="md-nav__link">
      C Style Convention
    </a>
  </li>

    
      
      
      



  <li class="md-nav__item">
    <a href="documentation.html" class="md-nav__link">
      C Documentation
    </a>
  </li>

    
      
      
      



  <li class="md-nav__item">
    <a href="messages.html" class="md-nav__link">
      C Compiler Messages
    </a>
  </li>

    
      
      
      



  <li class="md-nav__item">
    <a href="library.html" class="md-nav__link">
      CS1010 I/O Library
    </a>
  </li>

    
      
      
      



  
  <li class="md-nav__item md-nav__item--nested">
    
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-14" type="checkbox" id="nav-14" >
    
    <label class="md-nav__link" for="nav-14">
      Software/Tools
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Software/Tools" data-md-level="1">
      <label class="md-nav__title" for="nav-14">
        <span class="md-nav__icon md-icon"></span>
        Software/Tools
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="environments.html" class="md-nav__link">
      Programming Environments
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="github.html" class="md-nav__link">
      GitHub
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="unix.html" class="md-nav__link">
      UNIX
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="clang.html" class="md-nav__link">
      CLang
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="vim.html" class="md-nav__link">
      Vim
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="make.html" class="md-nav__link">
      Make
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="tmate.html" class="md-nav__link">
      TMate
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="zoom.html" class="md-nav__link">
      Zoom
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="panopto/panopto.html" class="md-nav__link">
      Panopto
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      



  <li class="md-nav__item">
    <a href="1819s1.html" class="md-nav__link">
      18/19 Semester 1
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#learning-objectives" class="md-nav__link">
    Learning Objectives
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#stack-frame" class="md-nav__link">
    Stack Frame
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#automatic-variable" class="md-nav__link">
    Automatic Variable
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#stack-size" class="md-nav__link">
    Stack Size
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#problem-set-13" class="md-nav__link">
    Problem Set 13
  </a>
  
    <nav class="md-nav" aria-label="Problem Set 13">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#problem-131" class="md-nav__link">
    Problem 13.1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#problem-132" class="md-nav__link">
    Problem 13.2
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#problem-133" class="md-nav__link">
    Problem 13.3
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="unit-13-call-stack">Unit 13: Call Stack</h1>
<p>In this unit, we will delve deeper into how variables are stored in the memory and what happens when we call a function.</p>
<h2 id="learning-objectives">Learning Objectives</h2>
<p>After this unit, students should:</p>
<ul>
<li>understand the purpose of the call stack</li>
<li>be aware that the stack frame represents the memory allocated to a particular function call</li>
<li>be aware that the stack frame for a function is deallocated once the function terminates</li>
<li>understand what occurs in a stack frame when a variable is declared</li>
<li>understand what occurs in a stack frame when a variable is assigned</li>
<li>understand how function parameters are handled within the stack frame</li>
<li>be able to trace the contents of the call stack through nested function calls</li>
<li>be aware that there are three different types of variables: automatic, global, and static</li>
<li>be aware that the operating system limits the size of the call stack for each program</li>
</ul>
<h2 id="stack-frame">Stack Frame</h2>
<p>Modern OS typically divides the memory into several regions.  The region that we are concerned with for now is called the <em>call stack</em>.
Every function invocation causes the OS to allocate some memory on the call stack to store (among other things) the parameters passed into the function and the variables declared and used in the function.  The memory allocated to each function call is called a <em>stack frame</em>.  When a function returns, the stack frame is deallocated and freed up for other uses.</p>
<p>Let's start with the following simple program as an example.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
  <span class="kt">long</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="kt">long</span> <span class="n">y</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
</td></tr></table>
<p>When the OS runs the program above, it invokes, or calls, the function <code>main</code>.  A new stack frame is created for <code>main()</code>.  There are two variables <code>x</code> and <code>y</code> declared in <code>main</code>.  Recall from <a href="02-algo.html">Unit 2</a> that a variable is a location in the memory which holds a value.  Thus, the stack frame of the <code>main</code> will include these two variables.  We initialize <code>x</code> to 1 in the code above, so the value 1 will be placed in the memory location of <code>x</code>.  The variable <code>y</code> remains uninitialized, so it will contain whatever value that happens to be in the memory at that time.</p>
<p><img alt="stack" src="figures/stack/stack.001.png" /></p>
<p>Now, let's consider the program<sup id="fnref:1"><a class="footnote-ref" href="#fn:1">1</a></sup>:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kt">long</span> <span class="nf">add</span><span class="p">(</span><span class="kt">long</span> <span class="n">a</span><span class="p">,</span> <span class="kt">long</span> <span class="n">b</span><span class="p">)</span> <span class="p">{</span>
  <span class="kt">long</span> <span class="n">sum</span><span class="p">;</span>
  <span class="n">sum</span> <span class="o">=</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="p">;</span>
  <span class="k">return</span> <span class="n">sum</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
  <span class="kt">long</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="kt">long</span> <span class="n">y</span><span class="p">;</span>
  <span class="n">y</span> <span class="o">=</span> <span class="n">add</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
</td></tr></table>
<p>Now, the program invokes the function <code>add</code> with two parameters, using <code>x</code> and 10 as arguments.  What the OS does when <code>add</code> is called, is that it allocates another stack frame for <code>add</code>.  We can visualize the stack frame for <code>add</code> as being placed on top of the stack frame of <code>main</code>.  The stack frame for <code>add</code> includes two variables corresponding to the parameters <code>a</code>, <code>b</code>, and the variable <code>sum</code> declared in the function <code>add</code>.</p>
<p>When the stack frame for <code>add</code> is created, <code>sum</code> is uninitialized, but <code>a</code> is initialized to whatever the value of <code>x</code> is when the function is invoked (1 in this example), and <code>b</code> is initialized to 10, since that is the argument passed into <code>add</code>.</p>
<p><img alt="stack" src="figures/stack/stack.002.png" /></p>
<p>After the stack frame for <code>add</code> is set up, the code is executed.  The memory location for <code>sum</code> is then initialized to the sum of <code>a</code> and <code>b</code> (11 in this example), and the return statement is executed. </p>
<p><img alt="stack" src="figures/stack/stack.003.png" /></p>
<p>When a function returns, the stack frame for <code>sum</code> is removed.  The variables <code>sum</code>, <code>a</code>, <code>b</code> crumble into dust and no longer exist in the memory.  The value of the variable being returned (<code>sum</code> in this case) is then copied back to the stack frame of the <code>main</code> (the caller).  In this example, this value is copied into the memory location of <code>y</code>.</p>
<p><img alt="stack" src="figures/stack/stack.004.png" /></p>
<p>What would happen if we change the value of <code>a</code> within <code>add</code>?</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kt">long</span> <span class="nf">add</span><span class="p">(</span><span class="kt">long</span> <span class="n">a</span><span class="p">,</span> <span class="kt">long</span> <span class="n">b</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">sum</span> <span class="o">=</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="p">;</span>
  <span class="n">a</span> <span class="o">=</span> <span class="mi">42</span><span class="p">;</span>  <span class="c1">// change a</span>
  <span class="k">return</span> <span class="n">sum</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
  <span class="kt">long</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="kt">long</span> <span class="n">y</span><span class="p">;</span>
  <span class="n">y</span> <span class="o">=</span> <span class="n">add</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
</td></tr></table>
<p>In this example, we change the value of <code>a</code> in the call stack of <code>add</code> to 42.  This does not affect any variable in <code>main</code>, since the changes apply only within the stack frame of <code>add</code>.</p>
<p>A common bug by beginners is to try to write a function this way:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kt">void</span> <span class="nf">add</span><span class="p">(</span><span class="kt">long</span> <span class="n">sum</span><span class="p">,</span> <span class="kt">long</span> <span class="n">a</span><span class="p">,</span> <span class="kt">long</span> <span class="n">b</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">sum</span> <span class="o">=</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
  <span class="kt">long</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="kt">long</span> <span class="n">sum</span><span class="p">;</span>
  <span class="n">add</span><span class="p">(</span><span class="n">sum</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
</td></tr></table>
<p>Here, there are two versions of <code>sum</code>, one in the stack frame of <code>main</code>, the other in the stack frame of <code>add</code>.  When we change <code>sum</code> in <code>add</code>, we are changing a local copy which will eventually get deleted.  The assignment to <code>sum</code> in Line 2 does not affect the variable <code>sum</code> on Line 8 of <code>main</code>.</p>
<p>This explanation explains why a function is a black box, we can only pass in parameters and get a value in return.  Nothing else gets in and out.  There are no "side effects" -- whatever happens in the function, stays in the function and does not affect the caller (excepts if it reads or writes to the standard input/output).   Such a function is sometimes called a "pure function".</p>
<p>Pure functions simplies the reasoning about our code.  For instance, in the code snippet below, we can still be sure that, <code>x</code> is 1 and <code>sum</code> is 0, after invoking the function <code>add</code>, without knowing what is happening inside. </p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>  <span class="kt">long</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="kt">long</span> <span class="n">sum</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="n">add</span><span class="p">(</span><span class="n">sum</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span>
  <span class="c1">// { x == 1 }</span>
  <span class="c1">// { sum == 0 }</span>
</code></pre></div>
</td></tr></table>
<p>There is a paradigm of programming called <em>functional programming</em> where one of its tenets is that a program should consist of only pure functions.  Functional programming languages such as Haskell and F# provides language support for functional programming.  C, however, does not enforce such functional paradigm -- it is up to us programers to enforce it.  As we will see very soon, some of the core features of C actually introduce impureness into functions.</p>
<h2 id="automatic-variable">Automatic Variable</h2>
<p>Because of the way the memory for the variables are automatically allocated and deallocated when a function is invoked and when the function returns, we call these variables <em>automatic variables</em> or <em>auto</em> variable for short.  </p>
<p>There are two other types of variables, <em>global variable</em>, which we have mentioned is a very very bad programming practice in Lecture 5 and is banned from CS1010, and <em>static variable</em>, which could be useful in rare occasions but it is again a bug-prone feature of C and so using <code>static</code> variable in CS1010 is not allowed.</p>
<h2 id="stack-size">Stack Size</h2>
<p>The OS typically reserves a limited amount of memory for each program for the stack.  You can find out, on your system, what is the maximum allocated stack size with the command
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>ulimit -s
</code></pre></div>
</td></tr></table></p>
<p>On our CS1010 PE hosts, the limit is 8 MB. </p>
<h2 id="problem-set-13">Problem Set 13</h2>
<h3 id="problem-131">Problem 13.1</h3>
<p>Trace through what gets stored in the call stack when we run the following programs:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="cp">#include</span> <span class="cpf">&lt;math.h&gt;</span><span class="cp"></span>

<span class="kt">long</span> <span class="nf">square</span><span class="p">(</span><span class="kt">long</span> <span class="n">x</span><span class="p">)</span>
<span class="p">{</span>
  <span class="k">return</span> <span class="n">x</span><span class="o">*</span><span class="n">x</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">double</span> <span class="nf">hypotenuse_of</span><span class="p">(</span><span class="kt">long</span> <span class="n">base</span><span class="p">,</span> <span class="kt">long</span> <span class="n">height</span><span class="p">)</span>
<span class="p">{</span>
  <span class="k">return</span> <span class="n">sqrt</span><span class="p">(</span><span class="n">square</span><span class="p">(</span><span class="n">base</span><span class="p">)</span> <span class="o">+</span> <span class="n">square</span><span class="p">(</span><span class="n">height</span><span class="p">));</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
  <span class="n">hypotenuse_of</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
</td></tr></table>
<h3 id="problem-132">Problem 13.2</h3>
<p>Trace through what gets stored in the call stack when we run the following programs:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="cp">#include</span> <span class="cpf">&quot;cs1010.h&quot;</span><span class="cp"></span>

<span class="kt">long</span> <span class="nf">factorial</span><span class="p">(</span><span class="kt">long</span> <span class="n">n</span><span class="p">)</span>
<span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">n</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="n">factorial</span><span class="p">(</span><span class="n">n</span><span class="mi">-1</span><span class="p">)</span> <span class="o">*</span> <span class="n">n</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
  <span class="n">factorial</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
</td></tr></table>
<h3 id="problem-133">Problem 13.3</h3>
<p>What will be printed by the program below?
Trace through what gets stored in the call stack when we run the following programs:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="cp">#include</span> <span class="cpf">&quot;cs1010.h&quot;</span><span class="cp"></span>

<span class="kt">void</span> <span class="nf">incr</span><span class="p">(</span><span class="kt">long</span> <span class="n">x</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">x</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
    <span class="kt">long</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
    <span class="n">incr</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>
    <span class="n">incr</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>
    <span class="n">cs1010_print_long</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
</td></tr></table>
<div class="footnote">
<hr />
<ol>
<li id="fn:1">
<p>The variable <code>sum</code> is not necessary and the function can be better written as a one-liner <code>return a + b;</code>.  But I introduce the additional variable <code>sum</code> here to make the example more meaningful in explaining about stack frame.&#160;<a class="footnote-backref" href="#fnref:1" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
</ol>
</div>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="12-invariant.html" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                12. Invariant
              </div>
            </div>
          </a>
        
        
          <a href="14-array.html" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                14. Array
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright by Department of Computer Science, National University of Singapore 2021
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="assets/javascripts/vendor.08c56446.min.js"></script>
      <script src="assets/javascripts/bundle.6ced434e.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script>
      
      <script>
        app = initialize({
          base: ".",
          features: [],
          search: Object.assign({
            worker: "assets/javascripts/worker/search.8c7e0a7e.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
        <script src="javascripts/config.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
      
    
  </body>
</html>