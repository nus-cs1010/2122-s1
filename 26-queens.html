
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="canonical" href="https://nus-cs1010.github.io/2122-s1/26-queens.html">
      
      <link rel="shortcut icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-6.2.3">
    
    
      
        <title>26. N-Queens - CS1010 Programming Methodology</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.3b61ea93.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.39b8e14a.min.css">
        
          
          
          <meta name="theme-color" content="#546d78">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="stylesheets/extra.css">
    
      <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:400,700">
    
      <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&display=swap">
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="blue-grey" data-md-color-accent="">
      
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#unit-26-n-queens" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="https://nus-cs1010.github.io/2122-s1" title="CS1010 Programming Methodology" class="md-header-nav__button md-logo" aria-label="CS1010 Programming Methodology">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      <div class="md-header-nav__ellipsis">
        <div class="md-header-nav__topic">
          <span class="md-ellipsis">
            CS1010 Programming Methodology
          </span>
        </div>
        <div class="md-header-nav__topic">
          <span class="md-ellipsis">
            
              26. N-Queens
            
          </span>
        </div>
      </div>
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    




<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://nus-cs1010.github.io/2122-s1" title="CS1010 Programming Methodology" class="md-nav__button md-logo" aria-label="CS1010 Programming Methodology">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    CS1010 Programming Methodology
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      



  <li class="md-nav__item">
    <a href="index.html" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      



  <li class="md-nav__item">
    <a href="midterm.html" class="md-nav__link">
      Midterm
    </a>
  </li>

    
      
      
      



  <li class="md-nav__item">
    <a href="pe1.html" class="md-nav__link">
      PE1
    </a>
  </li>

    
      
      
      



  
  <li class="md-nav__item md-nav__item--nested">
    
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4" >
    
    <label class="md-nav__link" for="nav-4">
      General
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="General" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        <span class="md-nav__icon md-icon"></span>
        General
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="about.html" class="md-nav__link">
      About CS1010
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="outcomes.html" class="md-nav__link">
      Learning Outcomes
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="schedule.html" class="md-nav__link">
      Schedule
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="accounts.html" class="md-nav__link">
      Accounts
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="policies.html" class="md-nav__link">
      Policies
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="tutors.html" class="md-nav__link">
      Teaching Team
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  


  
  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5" checked>
    
    <label class="md-nav__link" for="nav-5">
      Notes
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Notes" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        <span class="md-nav__icon md-icon"></span>
        Notes
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="01-program.html" class="md-nav__link">
      1. What is a Program?
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="02-algo.html" class="md-nav__link">
      2. Computational Problem & Algorithms
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="03-func.html" class="md-nav__link">
      3. Functions
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="04-type.html" class="md-nav__link">
      4. Types
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="05-first-c.html" class="md-nav__link">
      5. First C Program
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="06-cs1010-io.html" class="md-nav__link">
      6. CS1010 I/O
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="07-arithmetic-ops.html" class="md-nav__link">
      7. Arithmetic Operations
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="08-if-else.html" class="md-nav__link">
      8. Conditional Statement
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="09-logical-exp.html" class="md-nav__link">
      9. Logical Expression
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="10-assert.html" class="md-nav__link">
      10. Assertions
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="11-loop.html" class="md-nav__link">
      11. Loops
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="12-invariant.html" class="md-nav__link">
      12. Invariant
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="13-call-stack.html" class="md-nav__link">
      13. Stack
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="14-array.html" class="md-nav__link">
      14. Array
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="15-pointers.html" class="md-nav__link">
      15. Pointer
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="16-call-by-reference.html" class="md-nav__link">
      16. Call-by-Reference
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="17-heap.html" class="md-nav__link">
      17. Heap
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="18-string.html" class="md-nav__link">
      18. String
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="19-md-array.html" class="md-nav__link">
      19. ND Array
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="20-macro.html" class="md-nav__link">
      20. C preprocessor
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="21-efficiency.html" class="md-nav__link">
      21. Efficiency
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="22-search.html" class="md-nav__link">
      22. Searching
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="23-sort.html" class="md-nav__link">
      23. Sorting
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="24-tower.html" class="md-nav__link">
      24. Tower of Hanoi
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="25-permutation.html" class="md-nav__link">
      25. Permutattion
    </a>
  </li>

        
          
          
          


  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        26. N-Queens
        <span class="md-nav__icon md-icon"></span>
      </label>
    
    <a href="26-queens.html" class="md-nav__link md-nav__link--active">
      26. N-Queens
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#learning-objectives" class="md-nav__link">
    Learning Objectives
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#searching-and-bracktacking" class="md-nav__link">
    Searching and Bracktacking
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#recursive-formulation" class="md-nav__link">
    Recursive Formulation
  </a>
  
    <nav class="md-nav" aria-label="Recursive Formulation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#generate-all-permutations" class="md-nav__link">
    Generate All Permutations
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#making-it-faster-pruning-impossible-solutions" class="md-nav__link">
    Making It Faster: Pruning Impossible Solutions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#problem-set-26" class="md-nav__link">
    Problem Set 26
  </a>
  
    <nav class="md-nav" aria-label="Problem Set 26">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#problem-261" class="md-nav__link">
    Problem 26.1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#problem-262" class="md-nav__link">
    Problem 26.2
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#appendix-complete-code" class="md-nav__link">
    Appendix: Complete Code
  </a>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="27-struct.html" class="md-nav__link">
      27. Struct
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="28-stdio.html" class="md-nav__link">
      28. Standard I/O
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      



  
  <li class="md-nav__item md-nav__item--nested">
    
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6" >
    
    <label class="md-nav__link" for="nav-6">
      Exercises
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Exercises" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        <span class="md-nav__icon md-icon"></span>
        Exercises
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="ex00.html" class="md-nav__link">
      0. Echo, Divide, Ones, BMI, Quadratic
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="ex01.html" class="md-nav__link">
      1. Odd, Sum, Triangle, Burger
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="ex02.html" class="md-nav__link">
      2. Date, GCD, Leap, Multiple
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="ex03.html" class="md-nav__link">
      3. Three, Factor, Parity, Nine, HDB
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="ex04.html" class="md-nav__link">
      4. Binary, Onigiri, Fibonacci
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="ex05.html" class="md-nav__link">
      5. Counter, Dot, Unit
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="ex06.html" class="md-nav__link">
      6. Error, Twilight, Reverse, Unique, LookNSay
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="ex08.html" class="md-nav__link">
      8. Length, Concat, Search
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="ex09.html" class="md-nav__link">
      9. Echo, Subtract, Line
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="ex10.html" class="md-nav__link">
      10. Transpose, Palindrome, Rotate, Marnell, Bracket
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="ex11.html" class="md-nav__link">
      11. TicTacToe, Sun, Replace, Soil, Substring
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="ex12.html" class="md-nav__link">
      12. Walk, Sudoku
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      



  
  <li class="md-nav__item md-nav__item--nested">
    
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7" >
    
    <label class="md-nav__link" for="nav-7">
      Assignments
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Assignments" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        <span class="md-nav__icon md-icon"></span>
        Assignments
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="assignment.html" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="as01.html" class="md-nav__link">
      1. Pyramid, Digits, Suffix, Taxi
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="as02.html" class="md-nav__link">
      2. Collatz, Rectangle, Prime, Pattern
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="as03.html" class="md-nav__link">
      3. Days, ID, Max, Padovan
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="as04.html" class="md-nav__link">
      4. Selection, Mastermind
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="as05.html" class="md-nav__link">
      5. Kendall, CountingSort, Add
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="as06.html" class="md-nav__link">
      6. Contact, Social, Life,
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="as07.html" class="md-nav__link">
      7. Peak, Sort, Inversion,
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="as08.html" class="md-nav__link">
      8. Fill, Maze,
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="as09.html" class="md-nav__link">
      9. Digits,
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      



  <li class="md-nav__item">
    <a href="readings.html" class="md-nav__link">
      Readings
    </a>
  </li>

    
      
      
      



  <li class="md-nav__item">
    <a href="c-in-cs1010.html" class="md-nav__link">
      C in CS1010
    </a>
  </li>

    
      
      
      



  <li class="md-nav__item">
    <a href="style.html" class="md-nav__link">
      C Style Convention
    </a>
  </li>

    
      
      
      



  <li class="md-nav__item">
    <a href="documentation.html" class="md-nav__link">
      C Documentation
    </a>
  </li>

    
      
      
      



  <li class="md-nav__item">
    <a href="messages.html" class="md-nav__link">
      C Compiler Messages
    </a>
  </li>

    
      
      
      



  <li class="md-nav__item">
    <a href="library.html" class="md-nav__link">
      CS1010 I/O Library
    </a>
  </li>

    
      
      
      



  
  <li class="md-nav__item md-nav__item--nested">
    
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-14" type="checkbox" id="nav-14" >
    
    <label class="md-nav__link" for="nav-14">
      Software/Tools
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Software/Tools" data-md-level="1">
      <label class="md-nav__title" for="nav-14">
        <span class="md-nav__icon md-icon"></span>
        Software/Tools
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="environments.html" class="md-nav__link">
      Programming Environments
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="github.html" class="md-nav__link">
      GitHub
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="unix.html" class="md-nav__link">
      UNIX
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="clang.html" class="md-nav__link">
      CLang
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="vim.html" class="md-nav__link">
      Vim
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="make.html" class="md-nav__link">
      Make
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="tmate.html" class="md-nav__link">
      TMate
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="zoom.html" class="md-nav__link">
      Zoom
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="panopto/panopto.html" class="md-nav__link">
      Panopto
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      



  <li class="md-nav__item">
    <a href="1819s1.html" class="md-nav__link">
      18/19 Semester 1
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#learning-objectives" class="md-nav__link">
    Learning Objectives
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#searching-and-bracktacking" class="md-nav__link">
    Searching and Bracktacking
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#recursive-formulation" class="md-nav__link">
    Recursive Formulation
  </a>
  
    <nav class="md-nav" aria-label="Recursive Formulation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#generate-all-permutations" class="md-nav__link">
    Generate All Permutations
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#making-it-faster-pruning-impossible-solutions" class="md-nav__link">
    Making It Faster: Pruning Impossible Solutions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#problem-set-26" class="md-nav__link">
    Problem Set 26
  </a>
  
    <nav class="md-nav" aria-label="Problem Set 26">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#problem-261" class="md-nav__link">
    Problem 26.1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#problem-262" class="md-nav__link">
    Problem 26.2
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#appendix-complete-code" class="md-nav__link">
    Appendix: Complete Code
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="unit-26-n-queens">Unit 26: N Queens</h1>
<h2 id="learning-objectives">Learning Objectives</h2>
<p>After taking this unit, students should</p>
<ul>
<li>be familiar with using recursion to search and prune the solution space to a problem</li>
<li>be familiar with the class N queens problem and its solution</li>
</ul>
<h2 id="searching-and-bracktacking">Searching and Bracktacking</h2>
<p>We now look at how recursion can help with solving problems that require <em>searching and backtracking</em>.  A classical example for this is the <span class="arithmatex">\(n\)</span>-queens problem, which can be stated as given a <span class="arithmatex">\(n \times n\)</span> chessboard, find a possible placement of <span class="arithmatex">\(n\)</span> queens on the chessboard, such that the queens do not threaten each other.    In other words, there is exactly one queen in each row, in each column, and each diagonal.  The 8-queens puzzle was first published by Max Bezzel in 1848, with the first solution published Franz Nauck in 1850.
The generalized <span class="arithmatex">\(n\)</span>-queens problems were introduced later.  It is known that there is no solution for <span class="arithmatex">\(n = 2\)</span> and <span class="arithmatex">\(n = 3\)</span>, but a solution exists for <span class="arithmatex">\(n &gt; 3\)</span>.</p>
<p>If we visualize the chessboard as a 2D array, with <code>#</code> as the position of a queen, and <code>.</code> as an empty position on the board, then a solution to the 4-queens problem looks like this:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>.#..
...#
#...
..#.
</code></pre></div>
</td></tr></table>
<h2 id="recursive-formulation">Recursive Formulation</h2>
<p>Let's see how we can formulate the problem recursively.  The first step is to simplify the problem to the most trivial case where we can solve it.  It is tempting to say that a simpler version of the problem is an <span class="arithmatex">\(n-1\)</span>-queens problem, and so the most trivial case is 1-queen.  While the solution to 1-queen is trivial, there is no solution to both 2-queen and 3-queen problems.  Further, if we have found a solution to the <span class="arithmatex">\(n-1\)</span>-queens problem, extending it to a solution of the <span class="arithmatex">\(n\)</span>-queens problem is not trivial.</p>
<h3 id="generate-all-permutations">Generate All Permutations</h3>
<p>As a start, let's borrow the idea from <a href="25-permutation.html">Unit 25</a> and generate all permutations of the queens' positions.  Let's label the columns <code>a</code>, <code>b</code>, <code>c</code>, .. etc.  Since we know that there must be exactly one queen in each row, and one queen in each column, the positions of the queens can be represented as a string that is a permutation of <code>abcde..</code>.  For instance, the solution of the 4-queen problem depicted above can be represented by <code>bdac</code>.</p>
<p>A simple algorithm is thus to generate all possible <span class="arithmatex">\(n!\)</span> permutations, and for each one, check if it is a valid placement.  We already ensure that there is exactly one queen per row and one queen per column.  It remains to check that the queens do not threaten each other diagonally.</p>
<p>Let's write a function that checks, given a string representation of the queen positions, whether there is any queen that threaten another or not:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="cm">/**</span>
<span class="cm"> * Checks if the queen on curr_row clashes with any queens from </span>
<span class="cm"> * curr_row+1 to end_row, inclusive.</span>
<span class="cm"> *</span>
<span class="cm"> * @param[in] queens   The string representation of the queens.</span>
<span class="cm"> * @param[in] curr_row The row where the queen to check for clashes </span>
<span class="cm"> *                     is on.</span>
<span class="cm"> * @param[in] end_row  The last row until which we check for </span>
<span class="cm"> *                     clashes.</span>
<span class="cm"> *</span>
<span class="cm"> * @pre    0 &lt;= curr_row &lt;= end_row</span>
<span class="cm"> * @return true if there is a queen that clahes with queen[curr_row] </span>
<span class="cm"> *         diagonally, false otherwise.</span>
<span class="cm"> */</span>
<span class="kt">bool</span> <span class="nf">has_a_queen_in_diagonal</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="n">queens</span><span class="p">[],</span> <span class="kt">size_t</span> <span class="n">curr_row</span><span class="p">,</span> 
                             <span class="kt">size_t</span> <span class="n">end_row</span><span class="p">)</span> <span class="p">{</span>
  <span class="kt">char</span> <span class="n">curr_col</span> <span class="o">=</span> <span class="n">queens</span><span class="p">[</span><span class="n">curr_row</span><span class="p">];</span>
  <span class="kt">char</span> <span class="n">left_col</span> <span class="o">=</span> <span class="n">curr_col</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
  <span class="kt">char</span> <span class="n">right_col</span> <span class="o">=</span> <span class="n">curr_col</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
  <span class="k">for</span> <span class="p">(</span><span class="kt">size_t</span> <span class="n">row</span> <span class="o">=</span> <span class="n">curr_row</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span> <span class="n">row</span> <span class="o">&lt;=</span> <span class="n">end_row</span><span class="p">;</span> <span class="n">row</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">queens</span><span class="p">[</span><span class="n">row</span><span class="p">]</span> <span class="o">==</span> <span class="n">left_col</span> <span class="o">||</span> <span class="n">queens</span><span class="p">[</span><span class="n">row</span><span class="p">]</span> <span class="o">==</span> <span class="n">right_col</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">left_col</span> <span class="o">-=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="n">right_col</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * Checks if any queen from row 0 to end_row (inclusive) </span>
<span class="cm"> * that clashes with each other, diagonally.</span>
<span class="cm"> *</span>
<span class="cm"> * @param[in] queens   The array containing the representation </span>
<span class="cm"> *                     of the queens.</span>
<span class="cm"> * @param[in] end_row  The last row until which we check for </span>
<span class="cm"> *                     clashes.</span>
<span class="cm"> *</span>
<span class="cm"> * @pre    0 &lt;= end_row &lt;= n-1</span>
<span class="cm"> * @return true if there are two queens that clash with each other.</span>
<span class="cm"> */</span>
<span class="kt">bool</span> <span class="nf">threaten_each_other_diagonally</span><span class="p">(</span><span class="kt">char</span> <span class="n">queens</span><span class="p">[],</span> <span class="kt">size_t</span> <span class="n">end_row</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">for</span> <span class="p">(</span><span class="kt">size_t</span> <span class="n">begin_row</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">begin_row</span> <span class="o">&lt;=</span> <span class="n">end_row</span><span class="p">;</span> <span class="n">begin_row</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">has_a_queen_in_diagonal</span><span class="p">(</span><span class="n">queens</span><span class="p">,</span> <span class="n">begin_row</span><span class="p">,</span> <span class="n">end_row</span><span class="p">))</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
</td></tr></table>
<p>Solving the <span class="arithmatex">\(n\)</span> queens problem is then easy.  The code below prints out all possible solutions to the <span class="arithmatex">\(n\)</span> queens problem.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="cm">/**</span>
<span class="cm"> * Search for all possible queens placement from row to n-1, </span>
<span class="cm"> * given the queens placement from row 0 to row-1.</span>
<span class="cm"> *</span>
<span class="cm"> * @param[in] queens  The string representation of queens </span>
<span class="cm"> *                    placement.</span>
<span class="cm"> * @param[in] n       The size of the chess board</span>
<span class="cm"> * @param[in] row     The last row where the queens positions </span>
<span class="cm"> *                    have been fixed.</span>
<span class="cm"> */</span>
<span class="kt">void</span> <span class="nf">nqueens</span><span class="p">(</span><span class="kt">char</span> <span class="n">queens</span><span class="p">[],</span> <span class="kt">size_t</span> <span class="n">n</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">row</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">row</span> <span class="o">==</span> <span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">threaten_each_other_diagonally</span><span class="p">(</span><span class="n">queens</span><span class="p">,</span> <span class="n">row</span><span class="p">))</span> <span class="p">{</span>
      <span class="n">cs1010_println_string</span><span class="p">(</span><span class="n">queens</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">return</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">for</span> <span class="p">(</span><span class="kt">size_t</span> <span class="n">i</span> <span class="o">=</span> <span class="n">row</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">swap</span><span class="p">(</span><span class="n">queens</span><span class="p">,</span> <span class="n">row</span><span class="p">,</span> <span class="n">i</span><span class="p">);</span>
    <span class="n">nqueens</span><span class="p">(</span><span class="n">queens</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">row</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
    <span class="n">swap</span><span class="p">(</span><span class="n">queens</span><span class="p">,</span> <span class="n">row</span><span class="p">,</span> <span class="n">i</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</td></tr></table>
<h3 id="making-it-faster-pruning-impossible-solutions">Making It Faster: Pruning Impossible Solutions</h3>
<p>One of the principles of writing efficient code is to avoid doing useless work.  The code above, which tests all permutations, actually generates much useless work.  Suppose the queens in the first two rows already threaten each other, then, there is no need to continue to generate all possible placements of queens for the remaining rows.</p>
<p>This concept is called <em>pruning</em> and is a key to speeding up many searching-based solutions.  <em>We want to prune away bad solutions as early as possible</em>.  This can be achieved easily, by checking if the queens already placed on the first <span class="arithmatex">\(k\)</span> rows threaten each other.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="cm">/**</span>
<span class="cm"> * Search for all possible queens placement from row to n-1, </span>
<span class="cm"> * given the queens placement from row 0 to row-1.</span>
<span class="cm"> *</span>
<span class="cm"> * @param[in] queens  The string representation of queens </span>
<span class="cm"> *                    placement.</span>
<span class="cm"> * @param[in] n       The size of the chess board</span>
<span class="cm"> * @param[in] row     The last row where the queens positions </span>
<span class="cm"> *                    have been fixed.</span>
<span class="cm"> */</span>
<span class="kt">void</span> <span class="nf">nqueens</span><span class="p">(</span><span class="kt">char</span> <span class="n">queens</span><span class="p">[],</span> <span class="kt">long</span> <span class="n">n</span><span class="p">,</span> <span class="kt">long</span> <span class="n">row</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">row</span> <span class="o">==</span> <span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">threaten_each_other_diagonally</span><span class="p">(</span><span class="n">queens</span><span class="p">,</span> <span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">))</span> <span class="p">{</span>
      <span class="n">cs1010_println_string</span><span class="p">(</span><span class="n">queens</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">return</span><span class="p">;</span>
  <span class="p">}</span>

  <span class="k">for</span> <span class="p">(</span><span class="kt">long</span> <span class="n">i</span> <span class="o">=</span> <span class="n">row</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">swap</span><span class="p">(</span><span class="n">queens</span><span class="p">,</span> <span class="n">row</span><span class="p">,</span> <span class="n">i</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">threaten_each_other_diagonally</span><span class="p">(</span><span class="n">queens</span><span class="p">,</span> <span class="n">row</span><span class="p">))</span> <span class="p">{</span>
      <span class="n">nqueens</span><span class="p">(</span><span class="n">queens</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">row</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="n">swap</span><span class="p">(</span><span class="n">queens</span><span class="p">,</span> <span class="n">row</span><span class="p">,</span> <span class="n">i</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</td></tr></table>
<p>Adding this condition can speed up the code significantly.</p>
<p>Such an algorithm is also known as a <em>branch-and-bound</em> algorithm, where we attempt different possible solutions and prune away partial solutions that we know will never work.  This is an important concept in artificial intelligence (AI)  In fact, the n-queen problem is a typical example used in introductory AI courses for branch-and-bound search.  Again, such solutions are more naturally expressed recursively.</p>
<h2 id="problem-set-26">Problem Set 26</h2>
<h3 id="problem-261">Problem 26.1</h3>
<p>In the code with pruning above, we check if the queens placed on Rows 0 to <code>row</code> threaten each other, and call <code>nqueens</code> recursively only if these queens do not threaten each other.  Identify the repetitive work being done in the calls <code>threaten_each_other_diagonally</code>, and suggest a way to remove the repetitive work.</p>
<h3 id="problem-262">Problem 26.2</h3>
<p>Consider the code to generate all possible permutations of a string from Problem 25.1.  Suppose that we restrict the permutations to those where the same character does not appear next to each other.  Modify the solution to Problem 25.1 to prune away permutations where the same character appears more than once consecutively.</p>
<h2 id="appendix-complete-code">Appendix: Complete Code</h2>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="n">include</span> <span class="s">&quot;cs1010.h&quot;</span>
<span class="cp">#include</span> <span class="cpf">&lt;stdbool.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;string.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;unistd.h&gt;</span><span class="cp"></span>

<span class="cm">/**</span>
<span class="cm"> * Draw the chessboard on screen.</span>
<span class="cm"> *</span>
<span class="cm"> * @param[in] queens The string representation of the queens</span>
<span class="cm"> * @param[in] n      The size of the chessboard</span>
<span class="cm"> */</span>
<span class="kt">void</span> <span class="n">draw</span><span class="p">(</span><span class="kt">char</span> <span class="n">queens</span><span class="p">[],</span> <span class="kt">size_t</span> <span class="n">n</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">cs1010_clear_screen</span><span class="p">();</span>
  <span class="k">for</span> <span class="p">(</span><span class="kt">size_t</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">char</span> <span class="n">col</span> <span class="o">=</span> <span class="sc">&#39;a&#39;</span><span class="p">;</span> <span class="n">col</span> <span class="o">&lt;</span> <span class="sc">&#39;a&#39;</span> <span class="o">+</span> <span class="p">(</span><span class="kt">char</span><span class="p">)</span><span class="n">n</span><span class="p">;</span> <span class="n">col</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="n">queens</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">col</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">putchar</span><span class="p">(</span><span class="sc">&#39;#&#39;</span><span class="p">);</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="n">putchar</span><span class="p">(</span><span class="sc">&#39;.&#39;</span><span class="p">);</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="n">putchar</span><span class="p">(</span><span class="sc">&#39;\n&#39;</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="n">usleep</span><span class="p">(</span><span class="mi">10000</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="n">swap</span><span class="p">(</span><span class="kt">char</span> <span class="n">a</span><span class="p">[],</span> <span class="kt">size_t</span> <span class="n">i</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">j</span><span class="p">)</span> <span class="p">{</span>
  <span class="kt">char</span> <span class="n">temp</span> <span class="o">=</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
  <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">];</span>
  <span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">temp</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * Checks if the queen on curr_row clashes with any queens</span>
<span class="cm"> * from curr_row+1 to end_row, inclusive.</span>
<span class="cm"> *</span>
<span class="cm"> * @param[in] queens   The string representation of the queens.</span>
<span class="cm"> * @param[in] curr_row The row where the queen to check for</span>
<span class="cm"> *                     clashes is on.</span>
<span class="cm"> * @param[in] end_row  The last row until which we check for</span>
<span class="cm"> *                     clashes.</span>
<span class="cm"> *</span>
<span class="cm"> * @pre    0 &lt;= curr_row &lt;= end_row</span>
<span class="cm"> * @return true if there is a queen that clahes with queen[curr_row]</span>
<span class="cm"> *         diagonally false otherwise.</span>
<span class="cm"> */</span>
<span class="kt">bool</span> <span class="n">has_a_queen_in_diagonal</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="n">queens</span><span class="p">[],</span> <span class="kt">size_t</span> <span class="n">curr_row</span><span class="p">,</span>
                             <span class="kt">size_t</span> <span class="n">end_row</span><span class="p">)</span> <span class="p">{</span>
  <span class="kt">char</span> <span class="n">curr_col</span> <span class="o">=</span> <span class="n">queens</span><span class="p">[</span><span class="n">curr_row</span><span class="p">];</span>
  <span class="kt">char</span> <span class="n">left_col</span> <span class="o">=</span> <span class="n">curr_col</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
  <span class="kt">char</span> <span class="n">right_col</span> <span class="o">=</span> <span class="n">curr_col</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
  <span class="k">for</span> <span class="p">(</span><span class="kt">size_t</span> <span class="n">row</span> <span class="o">=</span> <span class="n">curr_row</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span> <span class="n">row</span> <span class="o">&lt;=</span> <span class="n">end_row</span><span class="p">;</span> <span class="n">row</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">queens</span><span class="p">[</span><span class="n">row</span><span class="p">]</span> <span class="o">==</span> <span class="n">left_col</span> <span class="o">||</span> <span class="n">queens</span><span class="p">[</span><span class="n">row</span><span class="p">]</span> <span class="o">==</span> <span class="n">right_col</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="n">left_col</span> <span class="o">-=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="n">right_col</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * Checks if any queen from row 0 to end_row (inclusive) that</span>
<span class="cm"> * clashes with each other, diagonally.</span>
<span class="cm"> *</span>
<span class="cm"> * @param[in] queens   The array containing the representation</span>
<span class="cm"> *                     of the queens.</span>
<span class="cm"> * @param[in] end_row  The last row until which we check for clashes.</span>
<span class="cm"> *</span>
<span class="cm"> * @pre    0 &lt;= end_row &lt;= n-1</span>
<span class="cm"> * @return true if there are two queens that clash with each other.</span>
<span class="cm"> */</span>
<span class="kt">bool</span> <span class="n">threaten_each_other_diagonally</span><span class="p">(</span><span class="kt">char</span> <span class="n">queens</span><span class="p">[],</span> <span class="kt">size_t</span> <span class="n">end_row</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">for</span> <span class="p">(</span><span class="kt">size_t</span> <span class="n">begin_row</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">begin_row</span> <span class="o">&lt;=</span> <span class="n">end_row</span><span class="p">;</span> <span class="n">begin_row</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">has_a_queen_in_diagonal</span><span class="p">(</span><span class="n">queens</span><span class="p">,</span> <span class="n">begin_row</span><span class="p">,</span> <span class="n">end_row</span><span class="p">))</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/**</span>
<span class="cm"> * Fix a[0]..a[k - 1] but permute queens a[k]..a[len - 1]</span>
<span class="cm"> * Print out each permutation if valid.</span>
<span class="cm"> *</span>
<span class="cm"> * @param[in,out] a The array to permute</span>
<span class="cm"> * @param[in]     n The size of the array</span>
<span class="cm"> * @param[in]     k The starting index at which we will permute</span>
<span class="cm"> *</span>
<span class="cm"> * @post The string a remains unchanged</span>
<span class="cm"> */</span>
<span class="kt">bool</span> <span class="n">nqueens</span><span class="p">(</span><span class="kt">char</span> <span class="n">a</span><span class="p">[],</span> <span class="kt">size_t</span> <span class="n">n</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">k</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">k</span> <span class="o">==</span> <span class="n">n</span><span class="mi">-1</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">draw</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">n</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">threaten_each_other_diagonally</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">n</span> <span class="o">-</span> <span class="mi">1</span><span class="p">))</span> <span class="p">{</span>
      <span class="n">cs1010_println_string</span><span class="p">(</span><span class="n">a</span><span class="p">);</span>
      <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="k">for</span> <span class="p">(</span><span class="kt">size_t</span> <span class="n">i</span> <span class="o">=</span> <span class="n">k</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span><span class="o">+=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">swap</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="n">i</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">threaten_each_other_diagonally</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">k</span><span class="p">))</span> <span class="p">{</span>
      <span class="k">if</span> <span class="p">(</span><span class="n">nqueens</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="n">k</span><span class="o">+</span><span class="mi">1</span><span class="p">))</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="n">swap</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="n">k</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">size_t</span> <span class="n">n</span> <span class="o">=</span> <span class="n">cs1010_read_size_t</span><span class="p">();</span>
  <span class="kt">char</span> <span class="o">*</span><span class="n">queens</span> <span class="o">=</span> <span class="n">malloc</span><span class="p">((</span><span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="k">sizeof</span><span class="p">(</span><span class="kt">char</span><span class="p">));</span>
  <span class="n">queens</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="sc">&#39;a&#39;</span><span class="p">;</span>
  <span class="k">for</span> <span class="p">(</span><span class="kt">size_t</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">queens</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">queens</span><span class="p">[</span><span class="n">i</span><span class="mi">-1</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="n">queens</span><span class="p">[</span><span class="n">n</span><span class="p">]</span> <span class="o">=</span> <span class="sc">&#39;\0&#39;</span><span class="p">;</span>
  <span class="n">nqueens</span><span class="p">(</span><span class="n">queens</span><span class="p">,</span> <span class="n">n</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
  <span class="n">free</span><span class="p">(</span><span class="n">queens</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div>
</td></tr></table>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="25-permutation.html" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                25. Permutattion
              </div>
            </div>
          </a>
        
        
          <a href="27-struct.html" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                27. Struct
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright by Department of Computer Science, National University of Singapore 2021
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="assets/javascripts/vendor.08c56446.min.js"></script>
      <script src="assets/javascripts/bundle.6ced434e.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script>
      
      <script>
        app = initialize({
          base: ".",
          features: [],
          search: Object.assign({
            worker: "assets/javascripts/worker/search.8c7e0a7e.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
        <script src="javascripts/config.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
      
    
  </body>
</html>