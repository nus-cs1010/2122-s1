
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="canonical" href="https://nus-cs1010.github.io/2122-s1/19-md-array.html">
      
      <link rel="shortcut icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-6.2.3">
    
    
      
        <title>19. ND Array - CS1010 Programming Methodology</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.3b61ea93.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.39b8e14a.min.css">
        
          
          
          <meta name="theme-color" content="#546d78">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="stylesheets/extra.css">
    
      <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:400,700">
    
      <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&display=swap">
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="blue-grey" data-md-color-accent="">
      
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#unit-19-multi-dimensional-arrays" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="https://nus-cs1010.github.io/2122-s1" title="CS1010 Programming Methodology" class="md-header-nav__button md-logo" aria-label="CS1010 Programming Methodology">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      <div class="md-header-nav__ellipsis">
        <div class="md-header-nav__topic">
          <span class="md-ellipsis">
            CS1010 Programming Methodology
          </span>
        </div>
        <div class="md-header-nav__topic">
          <span class="md-ellipsis">
            
              19. ND Array
            
          </span>
        </div>
      </div>
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    




<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://nus-cs1010.github.io/2122-s1" title="CS1010 Programming Methodology" class="md-nav__button md-logo" aria-label="CS1010 Programming Methodology">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 003-3 3 3 0 00-3-3 3 3 0 00-3 3 3 3 0 003 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    CS1010 Programming Methodology
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      



  <li class="md-nav__item">
    <a href="index.html" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      



  <li class="md-nav__item">
    <a href="midterm.html" class="md-nav__link">
      Midterm
    </a>
  </li>

    
      
      
      



  <li class="md-nav__item">
    <a href="pe1.html" class="md-nav__link">
      PE1
    </a>
  </li>

    
      
      
      



  
  <li class="md-nav__item md-nav__item--nested">
    
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4" >
    
    <label class="md-nav__link" for="nav-4">
      General
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="General" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        <span class="md-nav__icon md-icon"></span>
        General
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="about.html" class="md-nav__link">
      About CS1010
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="outcomes.html" class="md-nav__link">
      Learning Outcomes
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="schedule.html" class="md-nav__link">
      Schedule
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="accounts.html" class="md-nav__link">
      Accounts
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="policies.html" class="md-nav__link">
      Policies
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="tutors.html" class="md-nav__link">
      Teaching Team
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  


  
  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5" checked>
    
    <label class="md-nav__link" for="nav-5">
      Notes
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Notes" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        <span class="md-nav__icon md-icon"></span>
        Notes
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="01-program.html" class="md-nav__link">
      1. What is a Program?
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="02-algo.html" class="md-nav__link">
      2. Computational Problem & Algorithms
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="03-func.html" class="md-nav__link">
      3. Functions
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="04-type.html" class="md-nav__link">
      4. Types
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="05-first-c.html" class="md-nav__link">
      5. First C Program
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="06-cs1010-io.html" class="md-nav__link">
      6. CS1010 I/O
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="07-arithmetic-ops.html" class="md-nav__link">
      7. Arithmetic Operations
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="08-if-else.html" class="md-nav__link">
      8. Conditional Statement
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="09-logical-exp.html" class="md-nav__link">
      9. Logical Expression
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="10-assert.html" class="md-nav__link">
      10. Assertions
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="11-loop.html" class="md-nav__link">
      11. Loops
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="12-invariant.html" class="md-nav__link">
      12. Invariant
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="13-call-stack.html" class="md-nav__link">
      13. Stack
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="14-array.html" class="md-nav__link">
      14. Array
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="15-pointers.html" class="md-nav__link">
      15. Pointer
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="16-call-by-reference.html" class="md-nav__link">
      16. Call-by-Reference
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="17-heap.html" class="md-nav__link">
      17. Heap
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="18-string.html" class="md-nav__link">
      18. String
    </a>
  </li>

        
          
          
          


  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        19. ND Array
        <span class="md-nav__icon md-icon"></span>
      </label>
    
    <a href="19-md-array.html" class="md-nav__link md-nav__link--active">
      19. ND Array
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#learning-objectives" class="md-nav__link">
    Learning Objectives
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fixed-size-2d-array" class="md-nav__link">
    Fixed-size 2D Array
  </a>
  
    <nav class="md-nav" aria-label="Fixed-size 2D Array">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pointer-to-array" class="md-nav__link">
    Pointer to Array
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fixed-size-array-of-dynamically-allocated-array" class="md-nav__link">
    Fixed Size Array of Dynamically Allocated Array
  </a>
  
    <nav class="md-nav" aria-label="Fixed Size Array of Dynamically Allocated Array">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dealing-with-allocation-failures" class="md-nav__link">
    Dealing with Allocation Failures
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dynamically-size-2d-array" class="md-nav__link">
    Dynamically Size 2D Array
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#jagged-array" class="md-nav__link">
    Jagged Array
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#initializing-a-multidimensional-array" class="md-nav__link">
    Initializing a Multidimensional Array
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#problem-set" class="md-nav__link">
    Problem Set
  </a>
  
    <nav class="md-nav" aria-label="Problem Set">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#problem-191" class="md-nav__link">
    Problem 19.1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#problem-192" class="md-nav__link">
    Problem 19.2
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="20-macro.html" class="md-nav__link">
      20. C preprocessor
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="21-efficiency.html" class="md-nav__link">
      21. Efficiency
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="22-search.html" class="md-nav__link">
      22. Searching
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="23-sort.html" class="md-nav__link">
      23. Sorting
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="24-tower.html" class="md-nav__link">
      24. Tower of Hanoi
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="25-permutation.html" class="md-nav__link">
      25. Permutattion
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="26-queens.html" class="md-nav__link">
      26. N-Queens
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="27-struct.html" class="md-nav__link">
      27. Struct
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="28-stdio.html" class="md-nav__link">
      28. Standard I/O
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      



  
  <li class="md-nav__item md-nav__item--nested">
    
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6" >
    
    <label class="md-nav__link" for="nav-6">
      Exercises
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Exercises" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        <span class="md-nav__icon md-icon"></span>
        Exercises
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="ex00.html" class="md-nav__link">
      0. Echo, Divide, Ones, BMI, Quadratic
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="ex01.html" class="md-nav__link">
      1. Odd, Sum, Triangle, Burger
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="ex02.html" class="md-nav__link">
      2. Date, GCD, Leap, Multiple
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="ex03.html" class="md-nav__link">
      3. Three, Factor, Parity, Nine, HDB
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="ex04.html" class="md-nav__link">
      4. Binary, Onigiri, Fibonacci
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="ex05.html" class="md-nav__link">
      5. Counter, Dot, Unit
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="ex06.html" class="md-nav__link">
      6. Error, Twilight, Reverse, Unique, LookNSay
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="ex08.html" class="md-nav__link">
      8. Length, Concat, Search
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="ex09.html" class="md-nav__link">
      9. Echo, Subtract, Line
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="ex10.html" class="md-nav__link">
      10. Transpose, Palindrome, Rotate, Marnell, Bracket
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="ex11.html" class="md-nav__link">
      11. TicTacToe, Sun, Replace, Soil, Substring
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="ex12.html" class="md-nav__link">
      12. Walk, Sudoku
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      



  
  <li class="md-nav__item md-nav__item--nested">
    
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7" >
    
    <label class="md-nav__link" for="nav-7">
      Assignments
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Assignments" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        <span class="md-nav__icon md-icon"></span>
        Assignments
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="assignment.html" class="md-nav__link">
      Overview
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="as01.html" class="md-nav__link">
      1. Pyramid, Digits, Suffix, Taxi
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="as02.html" class="md-nav__link">
      2. Collatz, Rectangle, Prime, Pattern
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="as03.html" class="md-nav__link">
      3. Days, ID, Max, Padovan
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="as04.html" class="md-nav__link">
      4. Selection, Mastermind
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="as05.html" class="md-nav__link">
      5. Kendall, CountingSort, Add
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="as06.html" class="md-nav__link">
      6. Contact, Social, Life,
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="as07.html" class="md-nav__link">
      7. Peak, Sort, Inversion,
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="as08.html" class="md-nav__link">
      8. Fill, Maze,
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      



  <li class="md-nav__item">
    <a href="readings.html" class="md-nav__link">
      Readings
    </a>
  </li>

    
      
      
      



  <li class="md-nav__item">
    <a href="c-in-cs1010.html" class="md-nav__link">
      C in CS1010
    </a>
  </li>

    
      
      
      



  <li class="md-nav__item">
    <a href="style.html" class="md-nav__link">
      C Style Convention
    </a>
  </li>

    
      
      
      



  <li class="md-nav__item">
    <a href="documentation.html" class="md-nav__link">
      C Documentation
    </a>
  </li>

    
      
      
      



  <li class="md-nav__item">
    <a href="messages.html" class="md-nav__link">
      C Compiler Messages
    </a>
  </li>

    
      
      
      



  <li class="md-nav__item">
    <a href="library.html" class="md-nav__link">
      CS1010 I/O Library
    </a>
  </li>

    
      
      
      



  
  <li class="md-nav__item md-nav__item--nested">
    
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-14" type="checkbox" id="nav-14" >
    
    <label class="md-nav__link" for="nav-14">
      Software/Tools
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Software/Tools" data-md-level="1">
      <label class="md-nav__title" for="nav-14">
        <span class="md-nav__icon md-icon"></span>
        Software/Tools
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          



  <li class="md-nav__item">
    <a href="environments.html" class="md-nav__link">
      Programming Environments
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="github.html" class="md-nav__link">
      GitHub
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="unix.html" class="md-nav__link">
      UNIX
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="clang.html" class="md-nav__link">
      CLang
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="vim.html" class="md-nav__link">
      Vim
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="make.html" class="md-nav__link">
      Make
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="tmate.html" class="md-nav__link">
      TMate
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="zoom.html" class="md-nav__link">
      Zoom
    </a>
  </li>

        
          
          
          



  <li class="md-nav__item">
    <a href="panopto/panopto.html" class="md-nav__link">
      Panopto
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      



  <li class="md-nav__item">
    <a href="1819s1.html" class="md-nav__link">
      18/19 Semester 1
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#learning-objectives" class="md-nav__link">
    Learning Objectives
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fixed-size-2d-array" class="md-nav__link">
    Fixed-size 2D Array
  </a>
  
    <nav class="md-nav" aria-label="Fixed-size 2D Array">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pointer-to-array" class="md-nav__link">
    Pointer to Array
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fixed-size-array-of-dynamically-allocated-array" class="md-nav__link">
    Fixed Size Array of Dynamically Allocated Array
  </a>
  
    <nav class="md-nav" aria-label="Fixed Size Array of Dynamically Allocated Array">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#dealing-with-allocation-failures" class="md-nav__link">
    Dealing with Allocation Failures
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dynamically-size-2d-array" class="md-nav__link">
    Dynamically Size 2D Array
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#jagged-array" class="md-nav__link">
    Jagged Array
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#initializing-a-multidimensional-array" class="md-nav__link">
    Initializing a Multidimensional Array
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#problem-set" class="md-nav__link">
    Problem Set
  </a>
  
    <nav class="md-nav" aria-label="Problem Set">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#problem-191" class="md-nav__link">
    Problem 19.1
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#problem-192" class="md-nav__link">
    Problem 19.2
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="unit-19-multi-dimensional-arrays">Unit 19: Multi-Dimensional Arrays</h1>
<h2 id="learning-objectives">Learning Objectives</h2>
<p>After completing this unit, students should:</p>
<ul>
<li>be comfortable reading and writing code that involves multi-dimensional arrays</li>
<li>be able to declare and allocate multi-dimensional arrays on the stack and the heap</li>
<li>be able to decide when to use a fixed-size multi-dimensional array, a dynamically-sized multi-dimensional array, or a mixture of the two</li>
<li>understand how we can pass a multi-dimensional array into a function</li>
<li>understand the differences in C syntax, between an array of pointers and a pointer to an array.</li>
<li>be able to declare and allocate jagged arrays</li>
</ul>
<h2 id="fixed-size-2d-array">Fixed-size 2D Array</h2>
<p>At the beginning of Unit 14, we say that an array can hold one or more values of some type <span class="arithmatex">\(T\)</span>.  <span class="arithmatex">\(T\)</span> can be any type, including an array!  So, we can have an array where each element is another array.</p>
<p>For instance,
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kt">long</span> <span class="n">matrix</span><span class="p">[</span><span class="mi">10</span><span class="p">][</span><span class="mi">20</span><span class="p">];</span>
</code></pre></div>
</td></tr></table></p>
<p>Here, we have an array of 10 elements, and each element is an array of 20 <code>long</code> values.</p>
<p>When we access the elements in the array, we can use the notation <code>matrix[i][j]</code>.  This notation is actually a simpler form of <code>(matrix[i])[j]</code>  -- <code>matrix[i]</code> refers the <code>i+1</code>-th element in <code>matrix</code>, which is an array of 20 elements. So <code>(matrix[i])[j]</code> accesses the <code>j+1</code>-th element in this array of 20 elements.</p>
<p>Such an array is called a two-dimensional array, or 2D array.  We can have a 3D array, 4D array, and so on.</p>
<p>We have seen three types of arrays.  On the stack, we have fixed-length arrays and variable-length arrays.  On the heap, we have dynamically allocated arrays.  A 2D array can mix different types of arrays.  Since we ban the use of variable length arrays, we will focus on fixed-length arrays and dynamically allocated arrays only.</p>
<p>The example <code>matrix</code> above is a fixed-length 2D array.  In the memory, a continuous space to store 200 <code>long</code> values is been allocated.  We can visualize this as having 10 rows of <code>long</code> array, each array contains 20 columns of <code>long</code> values.</p>
<p>Since <code>matrix[i]</code> is an array in the example above, <code>matrix[i]</code> decays to <code>&amp;matrix[i][0]</code>, the address of the first element in matrix[i].  After decay, <code>matrix[i]</code> can be treated as having the type <code>long *</code>.</p>
<p>Further, since <code>matrix[i]</code> is a 1D array, we can pass <code>matrix[i]</code>, which is one of the rows in <code>matrix</code>, just like a normal 1D array:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kt">void</span> <span class="nf">bar</span><span class="p">(</span><span class="kt">size_t</span> <span class="n">num_of_cols</span><span class="p">,</span> <span class="kt">long</span> <span class="n">matrix_row</span><span class="p">[</span><span class="n">num_of_cols</span><span class="p">])</span> <span class="p">{</span> <span class="p">..</span> <span class="p">}</span>
<span class="kt">void</span> <span class="nf">bar</span><span class="p">(</span><span class="kt">size_t</span> <span class="n">num_of_cols</span><span class="p">,</span> <span class="kt">long</span> <span class="n">matrix_row</span><span class="p">[])</span> <span class="p">{</span> <span class="p">..</span> <span class="p">}</span>
<span class="kt">void</span> <span class="nf">bar</span><span class="p">(</span><span class="kt">size_t</span> <span class="n">num_of_cols</span><span class="p">,</span> <span class="kt">long</span><span class="o">*</span> <span class="n">matrix_row</span><span class="p">)</span> <span class="p">{</span> <span class="p">..</span> <span class="p">}</span>
</code></pre></div>
</td></tr></table>
<p>We can then invoke the function <code>bar</code> like:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="n">bar</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="n">matrix</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
</code></pre></div>
</td></tr></table>
<p>Things get a bit tricky when we want to pass a 2D array into a function.  By array decay, when we use the array name <code>matrix</code>, it is equivalent to <code>&amp;matrix[0]</code>, which is the address of the first element in <code>matrix</code>, which is the memory address of an array of 20 <code>long</code> elements.</p>
<h3 id="pointer-to-array">Pointer to Array</h3>
<p>Since an array in C consists only of a contiguous region of memory that stores the elements of the array, the address of an array is the same as the address of the first element of the array.</p>
<p>The following five statements would print out exactly the same values.
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="n">cs1010_println_pointer</span><span class="p">(</span><span class="n">matrix</span><span class="p">);</span>
<span class="n">cs1010_println_pointer</span><span class="p">(</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
<span class="n">cs1010_println_pointer</span><span class="p">(</span><span class="o">&amp;</span><span class="n">matrix</span><span class="p">);</span>
<span class="n">cs1010_println_pointer</span><span class="p">(</span><span class="o">&amp;</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
<span class="n">cs1010_println_pointer</span><span class="p">(</span><span class="o">&amp;</span><span class="n">matrix</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]);</span>
</code></pre></div>
</td></tr></table></p>
<p>We have seen that <code>matrix[0]</code> and <code>&amp;matrix[0][0]</code> both are memory addresses of a <code>long</code> value.  The variable <code>matrix</code> and <code>&amp;matrix[0]</code>, however, have the type memory address of a <code>long</code> <em>array</em>.  To declare a variable <code>a</code> that is the memory address of an array, we write:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kt">long</span> <span class="p">(</span><span class="o">*</span><span class="n">a</span><span class="p">)[</span><span class="mi">20</span><span class="p">];</span>
</code></pre></div>
</td></tr></table>
<p>We can understand this as follows: <code>(*a)</code> is an array of 20 long values.  <code>*</code> is the deference operator to an address, so <code>a</code> must then be a memory address of an array of 20 long values.</p>
<p>C is very particular about the type of an array.  An array of 20 long values is different from an array of 19 long values.  Trying to point a pointer to an array of 20 <code>long</code> elements to an array of 19 <code>long</code> elements would lead to error:
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kt">long</span> <span class="n">x</span><span class="p">[</span><span class="mi">19</span><span class="p">];</span>
<span class="kt">long</span> <span class="n">y</span><span class="p">[</span><span class="mi">20</span><span class="p">];</span>
<span class="kt">long</span> <span class="p">(</span><span class="o">*</span><span class="n">a</span><span class="p">)[</span><span class="mi">20</span><span class="p">];</span>
<span class="n">a</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">x</span><span class="p">;</span> <span class="c1">// error</span>
<span class="n">a</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">y</span><span class="p">;</span> <span class="c1">// ok</span>
</code></pre></div>
</td></tr></table></p>
<p>In other words, the size of a fixed-size array is part of the type information.</p>
<p>To pass a 2D array into a function, say <code>foo</code>, we can write </p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kt">void</span> <span class="nf">foo</span><span class="p">(</span><span class="kt">size_t</span> <span class="n">num_of_rows</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">num_of_cols</span><span class="p">,</span> <span class="kt">long</span> <span class="n">matrix_row</span><span class="p">[</span><span class="n">num_of_rows</span><span class="p">][</span><span class="mi">20</span><span class="p">])</span> <span class="p">{</span> <span class="p">..</span> <span class="p">}</span>
<span class="kt">void</span> <span class="nf">foo</span><span class="p">(</span><span class="kt">size_t</span> <span class="n">num_of_rows</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">num_of_cols</span><span class="p">,</span> <span class="kt">long</span> <span class="n">matrix_row</span><span class="p">[</span><span class="mi">10</span><span class="p">][</span><span class="mi">20</span><span class="p">]])</span> <span class="p">{</span> <span class="p">..</span> <span class="p">}</span>
<span class="kt">void</span> <span class="nf">foo</span><span class="p">(</span><span class="kt">size_t</span> <span class="n">num_of_rows</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">num_of_cols</span><span class="p">,</span> <span class="kt">long</span> <span class="n">matrix_row</span><span class="p">[][</span><span class="mi">20</span><span class="p">]])</span> <span class="p">{</span> <span class="p">..</span> <span class="p">}</span>
<span class="kt">void</span> <span class="nf">foo</span><span class="p">(</span><span class="kt">size_t</span> <span class="n">num_of_rows</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">num_of_cols</span><span class="p">,</span> <span class="kt">long</span> <span class="p">(</span><span class="o">*</span><span class="n">matrix_row</span><span class="p">)[</span><span class="mi">20</span><span class="p">])</span> <span class="p">{</span> <span class="p">..</span> <span class="p">}</span>
</code></pre></div>
</td></tr></table>
<p>Here, we cannot omit the number <code>20</code> since it is part of the type information.  </p>
<p>With the declaration above, we can then call the function <code>foo</code> and pass in the 2D array as such:
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="n">foo</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="n">matrix</span><span class="p">);</span>
</code></pre></div>
</td></tr></table></p>
<p>Note that the position of the parentheses when we declare a variable that is a pointer to an array is important and is not optional.  If we write it as either:
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kt">long</span> <span class="o">*</span><span class="n">a</span><span class="p">[</span><span class="mi">20</span><span class="p">];</span>
<span class="kt">long</span> <span class="o">*</span><span class="p">(</span><span class="n">a</span><span class="p">[</span><span class="mi">20</span><span class="p">]);</span>
</code></pre></div>
</td></tr></table></p>
<p>then we are declaring <code>a</code> as an array of 20 pointers to long instead!  We will see such declaration in use in the next section.</p>
<p><img alt="pointers" src="figures/nd-arrays/nd-arrays.001.png" /></p>
<h2 id="fixed-size-array-of-dynamically-allocated-array">Fixed Size Array of Dynamically Allocated Array</h2>
<p>Suppose that we know only one of the dimensions of the array in advance, but not the other dimension.  We can allocate a fixed-length array for the known dimension, and allocate the other dimension dynamically using <code>calloc</code>.  We can declare an array like this:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kt">double</span> <span class="o">*</span><span class="n">buckets</span><span class="p">[</span><span class="mi">10</span><span class="p">];</span>
<span class="kt">size_t</span> <span class="n">num_of_cols</span> <span class="o">=</span> <span class="n">cs1010_read_size_t</span><span class="p">();</span>
<span class="k">for</span> <span class="p">(</span><span class="kt">long</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">buckets</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">calloc</span><span class="p">(</span><span class="n">num_of_cols</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="kt">double</span><span class="p">));</span>
<span class="p">}</span>
</code></pre></div>
</td></tr></table>
<p><img alt="Dynamic 2D Array" src="figures/nd-arrays/nd-arrays.002.png" /></p>
<p>Here, <code>bucket</code> is a 1D array of 10 pointers to <code>double</code>.  So, we can easily pass <code>bucket</code> to a function just like any other 1D array:</p>
<ul>
<li><code>void baz(size_t num_of_rows, size_t num_of_cols, double **bucket)</code></li>
<li><code>void baz(size_t num_of_rows, size_t num_of_cols, double *bucket[])</code></li>
<li><code>void baz(size_t num_of_rows, size_t num_of_cols, double *bucket[num_of_cols])</code></li>
</ul>
<p>Accessing individual elements in such type of array is no different from accessing a fixed-length 2D array: we use <code>bucket[i][j]</code>.</p>
<p>Just like a dynamically allocated 1D array, we need to free the allocated memory after we are done:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">for</span> <span class="p">(</span><span class="kt">size_t</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">free</span><span class="p">(</span><span class="n">buckets</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
<span class="p">}</span>
</code></pre></div>
</td></tr></table>
<h3 id="dealing-with-allocation-failures">Dealing with Allocation Failures</h3>
<p>Just like a dynamically allocated 1D array, we need to deal with the possibility that memory allocation can fail.  To do this, we need to check if each <code>calloc</code> is successful or not.  In case one of the memory allocations fails, then we would have a partially allocated 2D array.  We will need to deallocate all those partially allocated memory with <code>free</code>.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kt">double</span> <span class="o">*</span><span class="n">buckets</span><span class="p">[</span><span class="mi">10</span><span class="p">];</span>
<span class="kt">size_t</span> <span class="n">num_of_cols</span> <span class="o">=</span> <span class="n">cs1010_read_size_t</span><span class="p">();</span>
<span class="k">for</span> <span class="p">(</span><span class="kt">size_t</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">buckets</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">calloc</span><span class="p">(</span><span class="n">num_of_cols</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="kt">double</span><span class="p">));</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">buckets</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">cs1010_println_string</span><span class="p">(</span><span class="s">&quot;unable to allocate array&quot;</span><span class="p">);</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">size_t</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">i</span><span class="p">;</span> <span class="n">j</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">free</span><span class="p">(</span><span class="n">buckets</span><span class="p">[</span><span class="n">j</span><span class="p">]);</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</td></tr></table>
<p>An alternative is to allocate a single contiguous region of memory with a single <code>calloc</code> call, and then point the pointers in our array in the right memory location.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kt">double</span> <span class="o">*</span><span class="n">buckets</span><span class="p">[</span><span class="mi">10</span><span class="p">];</span>
<span class="kt">size_t</span> <span class="n">num_of_cols</span> <span class="o">=</span> <span class="n">cs1010_read_size_t</span><span class="p">();</span>
<span class="n">buckets</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">calloc</span><span class="p">(</span><span class="n">num_of_cols</span> <span class="o">*</span> <span class="mi">10</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="kt">double</span><span class="p">));</span>
<span class="k">if</span> <span class="p">(</span><span class="n">buckets</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">cs1010_println_string</span><span class="p">(</span><span class="s">&quot;unable to allocate array&quot;</span><span class="p">);</span>
  <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">for</span> <span class="p">(</span><span class="kt">size_t</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">buckets</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">buckets</span><span class="p">[</span><span class="n">i</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">num_of_cols</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
</td></tr></table>
<p><img alt="Dynamic 2D Array" src="figures/nd-arrays/nd-arrays.003.png" /></p>
<h2 id="dynamically-size-2d-array">Dynamically Size 2D Array</h2>
<p>Suppose that we do not know both dimensions in advance, then we can allocate both dimensions of the array dynamically on the heap.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kt">double</span> <span class="o">**</span><span class="n">canvas</span><span class="p">;</span>
<span class="kt">size_t</span> <span class="n">num_of_rows</span> <span class="o">=</span> <span class="n">cs1010_read_size_t</span><span class="p">();</span>
<span class="kt">size_t</span> <span class="n">num_of_cols</span> <span class="o">=</span> <span class="n">cs1010_read_size_t</span><span class="p">();</span>
<span class="n">canvas</span> <span class="o">=</span> <span class="n">calloc</span><span class="p">(</span><span class="n">num_of_rows</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="kt">double</span> <span class="o">*</span><span class="p">));</span> <span class="c1">// note the call to sizeof</span>
<span class="k">for</span> <span class="p">(</span><span class="kt">size_t</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">num_of_rows</span><span class="p">;</span> <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">canvas</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">calloc</span><span class="p">(</span><span class="n">num_of_cols</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="kt">double</span><span class="p">));</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">canvas</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">cs1010_println_string</span><span class="p">(</span><span class="s">&quot;unable to allocate array&quot;</span><span class="p">);</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">size_t</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">i</span><span class="p">;</span> <span class="n">j</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">free</span><span class="p">(</span><span class="n">canvas</span><span class="p">[</span><span class="n">j</span><span class="p">]);</span>
    <span class="p">}</span>
    <span class="n">free</span><span class="p">(</span><span class="n">canvas</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</td></tr></table>
<p><img alt="Dynamic 2D Array" src="figures/nd-arrays/nd-arrays.004.png" /></p>
<p>Passing such an array into a function is no different from a 2D array where only one dimension is dynamically allocated above.</p>
<p>Remember to free the allocated memory for both dimensions after we are done, as well as if one of the rows encounters an error.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">for</span> <span class="p">(</span><span class="kt">size_t</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="kt">size_t</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">num_of_rows</span><span class="p">;</span> <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">free</span><span class="p">(</span><span class="n">canvas</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
<span class="p">}</span>
<span class="n">free</span><span class="p">(</span><span class="n">canvas</span><span class="p">);</span>
</code></pre></div>
</td></tr></table>
<p>Note that during the deallocation of memory, we need to do it in the reverse order of memory allocation.  If we call <code>free(canvas)</code> first, we are no longer guaranteed to be able to access <code>canvas[i]</code> with the correct pointers inside, so calling <code>free(canvas[i])</code> after <code>free(canvas)</code> might lead to an error.</p>
<p>Just like before, there is an alternative where we can also allocate a single contiguous region of memory with a single <code>calloc</code> call, and then point the pointers in our array in the right memory location.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kt">double</span> <span class="o">**</span><span class="n">canvas</span><span class="p">;</span>
<span class="kt">size_t</span> <span class="n">num_of_rows</span> <span class="o">=</span> <span class="n">cs1010_read_size_t</span><span class="p">();</span>
<span class="kt">size_t</span> <span class="n">num_of_cols</span> <span class="o">=</span> <span class="n">cs1010_read_size_t</span><span class="p">();</span>
<span class="n">canvas</span> <span class="o">=</span> <span class="n">calloc</span><span class="p">(</span><span class="n">num_of_rows</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="kt">double</span> <span class="o">*</span><span class="p">));</span>
<span class="k">if</span> <span class="p">(</span><span class="n">canvas</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">cs1010_println_string</span><span class="p">(</span><span class="s">&quot;unable to allocate memory&quot;</span><span class="p">);</span>
  <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>
<span class="n">canvas</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">calloc</span><span class="p">(</span><span class="n">num_of_rows</span> <span class="o">*</span> <span class="n">num_of_cols</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="kt">double</span><span class="p">));</span>
<span class="k">if</span> <span class="p">(</span><span class="n">canvas</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">cs1010_println_string</span><span class="p">(</span><span class="s">&quot;unable to allocate memory&quot;</span><span class="p">);</span>
  <span class="n">free</span><span class="p">(</span><span class="n">canvas</span><span class="p">);</span>
  <span class="k">return</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">for</span> <span class="p">(</span><span class="kt">size_t</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">num_of_rows</span><span class="p">;</span> <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">canvas</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">canvas</span><span class="p">[</span><span class="n">i</span><span class="mi">-1</span><span class="p">]</span> <span class="o">+</span> <span class="n">num_of_cols</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
</td></tr></table>
<p>If we allocate a single contiguous region of memory for <code>canvas</code>, then we only need to <code>free(canvas[0])</code> and <code>free(canvas)</code> once we are done.</p>
<h2 id="jagged-array">Jagged Array</h2>
<p>One advantage of using a dynamically allocated array is that it allows a jagged 2D array, where each row has a different size.  The example below allocate memory for a 2D array that is shaped like a half-square: the first row has one element, the second row has two elements, the third row has three, and so on.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kt">double</span> <span class="o">*</span><span class="n">half_square</span><span class="p">[</span><span class="mi">10</span><span class="p">];</span>
<span class="k">for</span> <span class="p">(</span><span class="kt">size_t</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">10</span><span class="p">;</span> <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">half_square</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">calloc</span><span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="kt">double</span><span class="p">));</span>
<span class="p">}</span>
</code></pre></div>
</td></tr></table>
<h2 id="initializing-a-multidimensional-array">Initializing a Multidimensional Array</h2>
<p>Just like a 1D-array, we can initialize a multi-dimensional array with initializers during declaration:</p>
<p><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kt">long</span> <span class="n">matrix</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
    <span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">-1</span><span class="p">},</span>
    <span class="p">{</span><span class="mi">-1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">},</span>
    <span class="p">{</span><span class="mi">0</span><span class="p">,</span> <span class="mi">-1</span><span class="p">,</span> <span class="mi">1</span><span class="p">}</span>
<span class="p">};</span>
</code></pre></div>
</td></tr></table>
Note that we use nested <code>{</code> and <code>}</code> here.  There are other variations to the syntax above, which you may read up on your own if you are interested as we do not need to write complex initializers for multi-dimensional arrays that often.</p>
<h2 id="problem-set">Problem Set</h2>
<h3 id="problem-191">Problem 19.1</h3>
<p>Suppose we have a 2D array 
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>   <span class="kt">long</span> <span class="n">m</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">3</span><span class="p">];</span>
   <span class="kt">long</span> <span class="o">*</span><span class="n">n</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">m</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">];</span>
   <span class="n">m</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span> <span class="c1">// warning</span>
   <span class="n">n</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
</code></pre></div>
</td></tr></table></p>
<p>Suppose we ignore the compile warning generated by the code above and execute the program anyway.  Explain what happens when Line 3 and Line 4 are executed.</p>
<h3 id="problem-192">Problem 19.2</h3>
<p>We need to represent the distance in km between every major city in the world. Let's label every city with a number, ranging from 0 .. <span class="arithmatex">\(n-1\)</span>, where <span class="arithmatex">\(n\)</span> is the number of cities.  The distance between city <span class="arithmatex">\(i\)</span> and <span class="arithmatex">\(j\)</span> is the same as the distance between city <span class="arithmatex">\(j\)</span> and <span class="arithmatex">\(i\)</span>.  The distance can be represented with <code>long</code>.</p>
<p>Explain how you would represent this information using a jagged two-dimensional array in C efficiently.  We have information about a few thousand cities to store.</p>
<p>Explain how you would write a function <code>long dist(long **d, long i, long j)</code> to retrieve the distance between any two cities <span class="arithmatex">\(i\)</span> and <span class="arithmatex">\(j\)</span>.</p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="18-string.html" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                18. String
              </div>
            </div>
          </a>
        
        
          <a href="20-macro.html" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                20. C preprocessor
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright by Department of Computer Science, National University of Singapore 2021
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="assets/javascripts/vendor.08c56446.min.js"></script>
      <script src="assets/javascripts/bundle.6ced434e.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script>
      
      <script>
        app = initialize({
          base: ".",
          features: [],
          search: Object.assign({
            worker: "assets/javascripts/worker/search.8c7e0a7e.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
        <script src="javascripts/config.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
      
    
  </body>
</html>